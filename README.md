# Apio

A dynamic REST API server, using a manifest file to specify available collections

## Features

 - Multiple collections
 - Specify collection schema (field names and types)
 - Autogenerated generic REST API endpoints (GET, PUT, POST, DELETE)
 - Scheme validations on PUT or POST operations
 - List all available endpoints
 - MongoDB as main database
 
 
## Manifest Declaration

the manifest is a json formatted file with a list of collections to be populated in the API.


expected fields per collection:
 - name: collection name used for the url
 - fields: list of field names and types to be used

e.g.

```go
[
  {
    "name": "books",
    "fields": {
      "title": "string",
      "author": "string",
      "year": "float",
      ...
    }
  },
  ... // more collections
]
```

Available endpoints will be:

```go
GET     http://myurl.com/api/books/{id}
PUT     http://myurl.com/api/books/
POST    http://myurl.com/api/books/{id}
DELETE  http://myurl.com/api/books/{id}
```

A sample file can be found in *manifest.sample.json*


## Available Field Types

 - string
 - float (any numeric field)
 - bool
 
 
## Build Docker Image

No extra parameters are required for the docker image, so just run:

`docker build . -t apio-seriver`

## Run Docker Container

Use Dockerfile and update manifest.json path if necessary

TBD

## TODOs

 - custom manifest.json path
 - Endpoint for listing collection items (paginated?)
 - Add more validations to prevent creating same item multiple time through same request
 - Review if validations are required to prevent deleting item unintentional
 - Add more logs
 - Unit tests
 - Stress tests (concurrency for collections)